"use strict";(self.webpackChunkinfra_portal=self.webpackChunkinfra_portal||[]).push([[9299],{8931:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"what-we-did/Q3","title":"\ud83c\udf89 2025-Q3 Overview","description":"\ud83d\udcca Monitoring & Observability","source":"@site/docs/what-we-did/2025-Q3.mdx","sourceDirName":"what-we-did","slug":"/what-we-did/Q3","permalink":"/infra-portal/pr-preview/pr-40/docs/what-we-did/Q3","draft":false,"unlisted":false,"editUrl":"https://github.com/MapColonies/infra-portal/tree/master/docs/what-we-did/2025-Q3.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"\ud83c\udf89 2025-Q3 Overview","sidebar_position":2,"toc_min_heading_level":2,"toc_max_heading_level":6},"sidebar":"whatWeDidSidebar","previous":{"title":"What We Did","permalink":"/infra-portal/pr-preview/pr-40/docs/what-we-did/"},"next":{"title":"\ud83c\udf89 2025-Q2 Overview","permalink":"/infra-portal/pr-preview/pr-40/docs/what-we-did/Q2"}}');var t=n(4848),r=n(8453);const o={title:"\ud83c\udf89 2025-Q3 Overview",sidebar_position:2,toc_min_heading_level:2,toc_max_heading_level:6},a=void 0,l={},c=[{value:"\ud83d\udcca Monitoring &amp; Observability",id:"-monitoring--observability",level:2},{value:"\ud83e\udeb5 Welcome Loki: Our New Logging Solution",id:"-welcome-loki-our-new-logging-solution",level:3},{value:"\ud83d\udcbe MinIO Gets a Significant Upgrade!",id:"-minio-gets-a-significant-upgrade",level:3},{value:"\ud83d\udee1\ufe0f Authentication",id:"\ufe0f-authentication",level:2},{value:"\ud83d\udd11 Token Kiosk for Temporary Access",id:"-token-kiosk-for-temporary-access",level:3},{value:"\ud83d\udcb8 Infrastructure &amp; Cost Optimization",id:"-infrastructure--cost-optimization",level:2},{value:"\ud83d\udcc9 Weekend Auto-Scaler",id:"-weekend-auto-scaler",level:3},{value:"\ud83d\ude80 CI/CD Improvements",id:"-cicd-improvements",level:2},{value:"\ud83d\udd75\ufe0f Jenkins Observability",id:"\ufe0f-jenkins-observability",level:3},{value:"\ud83d\uddc3\ufe0f Databases",id:"\ufe0f-databases",level:2},{value:"\ud83d\udd12 Postgres with SSL for Local Development",id:"-postgres-with-ssl-for-local-development",level:3},{value:"\ud83d\udea6 Service Health &amp; Status",id:"-service-health--status",level:2},{value:"\u265f\ufe0f Checkmate - The CLI, Now as a Service",id:"\ufe0f-checkmate---the-cli-now-as-a-service",level:3},{value:"\u2728 New Status Page Initiative",id:"-new-status-page-initiative",level:3},{value:"\ud83d\udce6 MC packages",id:"-mc-packages",level:2},{value:"\u2728 Unified CLI utilities for openapi-helpers package v4.0.0",id:"-unified-cli-utilities-for-openapi-helpers-package-v400",level:3},{value:"\ud83d\udd4d Boilerplate",id:"-boilerplate",level:2},{value:"\ud83d\udd27 ts-server-boilerplate: PR and Build &amp; Push workflows refactor",id:"-ts-server-boilerplate-pr-and-build--push-workflows-refactor",level:3}];function d(e){const i={a:"a",admonition:"admonition",br:"br",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.h2,{id:"-monitoring--observability",children:"\ud83d\udcca Monitoring & Observability"}),"\n",(0,t.jsxs)(i.h3,{id:"-welcome-loki-our-new-logging-solution",children:["\ud83e\udeb5 Welcome ",(0,t.jsx)(i.a,{href:"https://grafana.com/docs/loki/latest",children:"Loki"}),": Our New Logging Solution"]}),"\n",(0,t.jsxs)(i.p,{children:["We're excited to complete our observability! Alongside ",(0,t.jsx)(i.strong,{children:(0,t.jsx)(i.a,{href:"https://prometheus.io",children:"Prometheus"})})," for metrics and ",(0,t.jsx)(i.strong,{children:(0,t.jsx)(i.a,{href:"https://grafana.com/docs/tempo/latest",children:"Tempo"})}),"\nfor traces, we've now integrated ",(0,t.jsx)(i.strong,{children:"Loki"})," as our official logging solution."]}),"\n",(0,t.jsxs)(i.p,{children:["Loki will aggregate logs from all our services, providing a centralized place to search, analyze, and debug.",(0,t.jsx)(i.br,{}),"\n","Logs will be processed in OpenTelemetry format via ",(0,t.jsx)(i.a,{href:"https://grafana.com/docs/alloy/latest",children:"Alloy"}),"."]}),"\n",(0,t.jsxs)(i.p,{children:["To get started, you can enable log scraping for your service by simply adding the following label to your pods: ",(0,t.jsx)(i.code,{children:'mapcolonies.io/alloy-api-logs: "true"'}),".",(0,t.jsx)(i.br,{}),"\n","After that, you can see the logs immediately ",(0,t.jsx)(i.a,{href:"https://grafana.mapcolonies.net/a/grafana-lokiexplore-app/explore",children:"here"})]}),"\n",(0,t.jsx)(i.admonition,{type:"info",children:(0,t.jsx)(i.p,{children:"In the future, we will release a dedicated NPM logger package, so in the meantime, DO NOT set this label on your NodeJS services."})}),"\n",(0,t.jsx)(i.h3,{id:"-minio-gets-a-significant-upgrade",children:"\ud83d\udcbe MinIO Gets a Significant Upgrade!"}),"\n",(0,t.jsxs)(i.p,{children:["We've rolled out a UI and monitoring upgrade for MinIO!",(0,t.jsx)(i.br,{}),"\n","We've often faced issues where MinIO would shut down because it ran out of disk space.\nTo prevent this, we've integrated robust metrics and proactive alerts to warn us long before space becomes an issue.\nAdditionally, we've added a new dashboard panel that shows the size of every bucket,\nmaking it incredibly easy to see where space is being used and how to free it up when needed."]}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.img,{alt:"Minio Dashboard",src:n(8808).A+"",width:"1564",height:"840"})}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.h2,{id:"\ufe0f-authentication",children:"\ud83d\udee1\ufe0f Authentication"}),"\n",(0,t.jsx)(i.h3,{id:"-token-kiosk-for-temporary-access",children:"\ud83d\udd11 Token Kiosk for Temporary Access"}),"\n",(0,t.jsxs)(i.p,{children:["We've launched the ",(0,t.jsx)(i.strong,{children:"Token Kiosk"}),", a new service for issuing temporary tokens to B2C clients.\nThis is especially useful for applications like ArcGIS-Pro and ArcMap, where preventing token sharing across different machines is a security priority."]}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.strong,{children:"Key Features:"})}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Secure Access"}),": The service generates temporary tokens and can distinguish between different devices to ensure tokens aren't shared."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"SSO Integration"}),": It uses an SSO to authenticate users securely."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"User-Friendly UI"}),": A simple, Hebrew-language interface allows users to generate a token, view an expiration countdown, and copy the token with a single click."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Token Lifecycle"}),": Tokens are valid for one week by default, and all issuance is logged in a database for tracking."]}),"\n"]}),"\n",(0,t.jsxs)(i.p,{children:["Feel free to tell your friends and show them the kiosk ",(0,t.jsx)(i.a,{href:"https://kiosk.mapcolonies.net",children:"here"}),"\ud83d\ude09"]}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.img,{alt:"Token Kiosk",src:n(3050).A+"",width:"1222",height:"640"})}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.h2,{id:"-infrastructure--cost-optimization",children:"\ud83d\udcb8 Infrastructure & Cost Optimization"}),"\n",(0,t.jsx)(i.h3,{id:"-weekend-auto-scaler",children:"\ud83d\udcc9 Weekend Auto-Scaler"}),"\n",(0,t.jsxs)(i.p,{children:["To help reduce costs, we've implemented a new ",(0,t.jsx)(i.strong,{children:"auto-scaling tool"}),". This tool automatically downscales all non-prod deployments over the weekend (Azure only, not relevant to in-networks).",(0,t.jsx)(i.br,{}),"\n","Don't worry, the tool scales them back up to their original replica counts first thing on Sunday morning."]}),"\n",(0,t.jsxs)(i.p,{children:["Whenever the tool starts working, it reports everything to our slack channel ",(0,t.jsx)(i.em,{children:"infra-notifications"})," so if anything goes wrong, we'll be the first one to know and fix it."]}),"\n",(0,t.jsx)(i.p,{children:"This simple change allows us to optimize our resource usage and save money without impacting performance during the work week."}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.h2,{id:"-cicd-improvements",children:"\ud83d\ude80 CI/CD Improvements"}),"\n",(0,t.jsx)(i.h3,{id:"\ufe0f-jenkins-observability",children:"\ud83d\udd75\ufe0f Jenkins Observability"}),"\n",(0,t.jsxs)(i.p,{children:["Ever had a pipeline fail without a clear reason?",(0,t.jsx)(i.br,{}),"\n","We've enhanced our Jenkins setup with improved observability.",(0,t.jsx)(i.br,{}),"\n","This will make it significantly easier to debug pipeline issues, detect errors proactively, and understand performance bottlenecks,\nleading to a more stable and reliable CI/CD environment."]}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.h2,{id:"\ufe0f-databases",children:"\ud83d\uddc3\ufe0f Databases"}),"\n",(0,t.jsx)(i.h3,{id:"-postgres-with-ssl-for-local-development",children:"\ud83d\udd12 Postgres with SSL for Local Development"}),"\n",(0,t.jsxs)(i.p,{children:["We've published a ",(0,t.jsx)(i.a,{href:"https://github.com/MapColonies/postgres-ssl",children:"new repository"})," containing instructions on how to easily deploy ",(0,t.jsx)(i.strong,{children:"Postgres with SSL"}),".",(0,t.jsx)(i.br,{}),"\n","The repo contains also a walkthrough and friendly guide for all the complex steps, from generating all the certs files to import and use them.",(0,t.jsx)(i.br,{}),"\n","This allows developers to test their services in an environment that more closely mirrors production,\nensuring that database connections are secure and properly configured before deployment."]}),"\n",(0,t.jsx)(i.p,{children:"What are you waiting for?\ud83d\ude31 Go deploy your secured postgres!!"}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.h2,{id:"-service-health--status",children:"\ud83d\udea6 Service Health & Status"}),"\n",(0,t.jsx)(i.h3,{id:"\ufe0f-checkmate---the-cli-now-as-a-service",children:"\u265f\ufe0f Checkmate - The CLI, Now as a Service"}),"\n",(0,t.jsxs)(i.p,{children:["Building on our ",(0,t.jsx)(i.a,{href:"https://github.com/MapColonies/infra-cli",children:"infra-CLI"}),", we're excited to introduce ",(0,t.jsx)(i.a,{href:"https://github.com/MapColonies/checkmate",children:"Checkmate"}),"!\nCheckmate is a new API service that exposes the same powerful checks and tools found in our CLI."]}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.img,{alt:"Checkmate",src:n(4316).A+"",width:"733",height:"476"})}),"\n",(0,t.jsx)(i.h3,{id:"-new-status-page-initiative",children:"\u2728 New Status Page Initiative"}),"\n",(0,t.jsxs)(i.p,{children:["We've begun work on a centralized ",(0,t.jsx)(i.strong,{children:"Status Page"})," for the entire MapColonies project. This page will be the single source of truth for questions like:"]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"What's the operational status of each team's services?"}),"\n",(0,t.jsx)(i.li,{children:"What alerts are currently active?"}),"\n",(0,t.jsx)(i.li,{children:"What is the uptime for key applications?"}),"\n"]}),"\n",(0,t.jsxs)(i.p,{children:["The status will be presented as a ",(0,t.jsx)(i.strong,{children:"Grafana dashboard"}),", built on metrics enriched with ",(0,t.jsx)(i.a,{href:"https://github.com/MapColonies/labels-and-annotations",children:"MapColonies labels and annotations"})," according to project requirements."]}),"\n",(0,t.jsx)(i.p,{children:"This is a collaborative effort, and soon we will be working closely with all teams to build out their respective sections on the page."}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.h2,{id:"-mc-packages",children:"\ud83d\udce6 MC packages"}),"\n",(0,t.jsx)(i.h3,{id:"-unified-cli-utilities-for-openapi-helpers-package-v400",children:"\u2728 Unified CLI utilities for openapi-helpers package v4.0.0"}),"\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.strong,{children:"Before:"})," The package provided a CLI that generates types from OpenAPI specifications."]}),"\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.strong,{children:"Now:"})," The package has been significantly enhanced with new capabilities:"]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Generates error mappings and code classes from the OpenAPI specification"}),"\n",(0,t.jsx)(i.li,{children:"Unified CLI to generate both types and errors, providing a single source of truth"}),"\n",(0,t.jsx)(i.li,{children:"Programmatic support is now available - you can import and use the generators directly in your code"}),"\n"]}),"\n",(0,t.jsxs)(i.p,{children:["You can find the full documentation here: ",(0,t.jsx)(i.a,{href:"https://github.com/MapColonies/openapi-helpers",children:"MapColonies openapi-helpers package"}),"."]}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.h2,{id:"-boilerplate",children:"\ud83d\udd4d Boilerplate"}),"\n",(0,t.jsx)(i.h3,{id:"-ts-server-boilerplate-pr-and-build--push-workflows-refactor",children:"\ud83d\udd27 ts-server-boilerplate: PR and Build & Push workflows refactor"}),"\n",(0,t.jsx)(i.p,{children:"Refactored the ts-server-boilerplate CI to maximize actions reuse and make changes easier for developers:"}),"\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.strong,{children:"Before:"})," ts-server-boilerplate workflows called reusable workflows in the shared-workflow repo.\n",(0,t.jsx)(i.strong,{children:"Now:"})," workflows call multiple reusable actions directly from the shared-workflow repo, keeping steps visible and easy to tweak in-repo."]}),"\n",(0,t.jsx)(i.p,{children:"Now developers can more easily adjust steps per service while still using our standardized actions."})]})}function h(e={}){const{wrapper:i}={...(0,r.R)(),...e.components};return i?(0,t.jsx)(i,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},4316:(e,i,n)=>{n.d(i,{A:()=>s});const s=n.p+"assets/images/checkmate-8a8108f0b5edece46465d95f59520140.png"},8808:(e,i,n)=>{n.d(i,{A:()=>s});const s=n.p+"assets/images/minio-dashboard-f587377da9e1e6ac94d3a1544e37dcba.png"},3050:(e,i,n)=>{n.d(i,{A:()=>s});const s=n.p+"assets/images/token-kiosk-af512d5b9bd89a6ad95bc5ceb8e5f0e2.png"},8453:(e,i,n)=>{n.d(i,{R:()=>o,x:()=>a});var s=n(6540);const t={},r=s.createContext(t);function o(e){const i=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),s.createElement(r.Provider,{value:i},e.children)}}}]);