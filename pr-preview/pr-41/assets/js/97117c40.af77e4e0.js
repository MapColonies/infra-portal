"use strict";(self.webpackChunkinfra_portal=self.webpackChunkinfra_portal||[]).push([[4843],{6679:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>c,frontMatter:()=>s,metadata:()=>r,toc:()=>u});const r=JSON.parse('{"id":"guides/DevOps/pipelines","title":"Pipelines","description":"Bundler/Unbundler","source":"@site/docs/guides/DevOps/pipelines.mdx","sourceDirName":"guides/DevOps","slug":"/guides/DevOps/pipelines","permalink":"/infra-portal/pr-preview/pr-41/docs/guides/DevOps/pipelines","draft":false,"unlisted":false,"editUrl":"https://github.com/MapColonies/infra-portal/tree/master/docs/guides/DevOps/pipelines.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"Pipelines","sidebar_position":1,"toc_min_heading_level":2,"toc_max_heading_level":6},"sidebar":"guidesSidebar","previous":{"title":"Helm Diff","permalink":"/infra-portal/pr-preview/pr-41/docs/guides/DevOps/helm-diff"},"next":{"title":"Config Management","permalink":"/infra-portal/pr-preview/pr-41/docs/category/config-management"}}');var l=t(4848),i=t(8453);t(1470),t(9365);const s={title:"Pipelines",sidebar_position:1,toc_min_heading_level:2,toc_max_heading_level:6},a=void 0,o={},u=[{value:"Bundler/Unbundler",id:"bundlerunbundler",level:2},{value:"Bundler pipeline",id:"bundler-pipeline",level:3},{value:"Unbundler pipeline",id:"unbundler-pipeline",level:3}];function d(e){const n={a:"a",br:"br",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"bundlerunbundler",children:"Bundler/Unbundler"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{alt:"Bundler and Unbundler",src:t(7562).A+"",width:"693",height:"231"})}),"\n",(0,l.jsx)(n.h3,{id:"bundler-pipeline",children:"Bundler pipeline"}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.a,{href:"https://jenkins.mapcolonies.net/job/bundler/",children:"bundler pipeline"})," has 1 parameter which is the ",(0,l.jsx)(n.code,{children:"artifacts.json"})," file."]}),"\n",(0,l.jsxs)(n.p,{children:["Here's an example of the ",(0,l.jsx)(n.code,{children:"artifacts.json"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n  "docker": {\n    "acrarolibotnonprod.azurecr.io": {\n      "3d-gateway": "v2.4.2",\n      "store-trigger": "v1.5.2"\n    },\n    "docker.io": {\n      "bitnami/redis": "7.2.3",\n      "timonwong/uwsgi-exporter": "latest"\n    }\n  },\n  "helm": {\n    "acrarolibotnonprod.azurecr.io": {\n      "gateway": "2.4.2",\n      "store-trigger": "1.5.2"\n    },\n    "https://charts.bitnami.com/bitnami": {\n      "redis": "18.5.0"\n    }\n  },\n  "git": [\n    "MapColonies/helm-charts"\n  ]\n}\n'})}),"\n",(0,l.jsxs)(n.p,{children:["In order to trigger the ",(0,l.jsx)(n.a,{href:"https://jenkins.mapcolonies.net/job/bundler/",children:"bundler pipeline"})," you'll need to follow the steps below:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Go to the bundler pipeline"}),"\n",(0,l.jsxs)(n.li,{children:["Click on ",(0,l.jsx)(n.code,{children:"Build with parameters"}),(0,l.jsx)(n.br,{}),"\n",(0,l.jsx)(n.img,{alt:"Bundler build with parameters",src:t(6865).A+"",width:"1214",height:"1070"})]}),"\n",(0,l.jsxs)(n.li,{children:["Click on ",(0,l.jsx)(n.code,{children:"Choose File"})," and upload the ",(0,l.jsx)(n.code,{children:"artifacts.json"})," from you local computer.",(0,l.jsx)(n.br,{}),"\n",(0,l.jsx)(n.img,{alt:"Bundler browse artifacts file",src:t(3011).A+"",width:"2010",height:"1186"})]}),"\n",(0,l.jsxs)(n.li,{children:["Click the Build button\n",(0,l.jsx)(n.img,{alt:"Bundler build button",src:t(7783).A+"",width:"1540",height:"1038"})]}),"\n",(0,l.jsxs)(n.li,{children:["After the bundler will finish it'll send a slack message to the ",(0,l.jsx)(n.code,{children:"<team>-notifications"})," channel based on the user logged in.\n",(0,l.jsx)(n.img,{alt:"Bundler slack message",src:t(4835).A+"",width:"1530",height:"360"})]}),"\n",(0,l.jsx)(n.li,{children:"Click on the download link in the slack message and download the bundle zip file which you'll use later on in the unbundler in the relevant network."}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"unbundler-pipeline",children:"Unbundler pipeline"}),"\n",(0,l.jsx)(n.p,{children:"In order to trigger the unbundler, open the jenkins instance in the relevant network where you want to to unbundle and click on the unbundler pipeline and follow the steps bellow."}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Click on ",(0,l.jsx)(n.code,{children:"Build with Parameters"})]}),"\n",(0,l.jsxs)(n.li,{children:["Click on ",(0,l.jsx)(n.code,{children:"Choose file"})," and select the bundler zip file from your computer\n",(0,l.jsx)(n.img,{alt:"Unbundler browse file",src:t(6611).A+"",width:"1072",height:"528"})]}),"\n",(0,l.jsxs)(n.li,{children:["Click the ",(0,l.jsx)(n.code,{children:"build"})," button"]}),"\n",(0,l.jsx)(n.li,{children:"Once the bundler is done you'll be able to find all the artifacts which were in the bundle zip file in all the registries in the specific network you're working on."}),"\n"]})]})}function c(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},9365:(e,n,t)=>{t.d(n,{A:()=>s});t(6540);var r=t(4164);const l={tabItem:"tabItem_Ymn6"};var i=t(4848);function s(e){let{children:n,hidden:t,className:s}=e;return(0,i.jsx)("div",{role:"tabpanel",className:(0,r.A)(l.tabItem,s),hidden:t,children:n})}},1470:(e,n,t)=>{t.d(n,{A:()=>k});var r=t(6540),l=t(4164),i=t(3104),s=t(6347),a=t(205),o=t(7485),u=t(1682),d=t(679);function c(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function p(e){const{values:n,children:t}=e;return(0,r.useMemo)((()=>{const e=n??function(e){return c(e).map((e=>{let{props:{value:n,label:t,attributes:r,default:l}}=e;return{value:n,label:t,attributes:r,default:l}}))}(t);return function(e){const n=(0,u.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function h(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function b(e){let{queryString:n=!1,groupId:t}=e;const l=(0,s.W6)(),i=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,o.aZ)(i),(0,r.useCallback)((e=>{if(!i)return;const n=new URLSearchParams(l.location.search);n.set(i,e),l.replace({...l.location,search:n.toString()})}),[i,l])]}function f(e){const{defaultValue:n,queryString:t=!1,groupId:l}=e,i=p(e),[s,o]=(0,r.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!h({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const r=t.find((e=>e.default))??t[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:n,tabValues:i}))),[u,c]=b({queryString:t,groupId:l}),[f,m]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[l,i]=(0,d.Dv)(t);return[l,(0,r.useCallback)((e=>{t&&i.set(e)}),[t,i])]}({groupId:l}),g=(()=>{const e=u??f;return h({value:e,tabValues:i})?e:null})();(0,a.A)((()=>{g&&o(g)}),[g]);return{selectedValue:s,selectValue:(0,r.useCallback)((e=>{if(!h({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);o(e),c(e),m(e)}),[c,m,i]),tabValues:i}}var m=t(2303);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var v=t(4848);function x(e){let{className:n,block:t,selectedValue:r,selectValue:s,tabValues:a}=e;const o=[],{blockElementScrollPositionUntilNextRender:u}=(0,i.a_)(),d=e=>{const n=e.currentTarget,t=o.indexOf(n),l=a[t].value;l!==r&&(u(n),s(l))},c=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const t=o.indexOf(e.currentTarget)+1;n=o[t]??o[0];break}case"ArrowLeft":{const t=o.indexOf(e.currentTarget)-1;n=o[t]??o[o.length-1];break}}n?.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.A)("tabs",{"tabs--block":t},n),children:a.map((e=>{let{value:n,label:t,attributes:i}=e;return(0,v.jsx)("li",{role:"tab",tabIndex:r===n?0:-1,"aria-selected":r===n,ref:e=>o.push(e),onKeyDown:c,onClick:d,...i,className:(0,l.A)("tabs__item",g.tabItem,i?.className,{"tabs__item--active":r===n}),children:t??n},n)}))})}function j(e){let{lazy:n,children:t,selectedValue:i}=e;const s=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=s.find((e=>e.props.value===i));return e?(0,r.cloneElement)(e,{className:(0,l.A)("margin-top--md",e.props.className)}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:s.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==i})))})}function w(e){const n=f(e);return(0,v.jsxs)("div",{className:(0,l.A)("tabs-container",g.tabList),children:[(0,v.jsx)(x,{...n,...e}),(0,v.jsx)(j,{...n,...e})]})}function k(e){const n=(0,m.A)();return(0,v.jsx)(w,{...e,children:c(e.children)},String(n))}},3011:(e,n,t)=>{t.d(n,{A:()=>r});const r=t.p+"assets/images/bundler-browse-file-2-c9c5bea410c6e0d6455e81193f256b12.png"},7783:(e,n,t)=>{t.d(n,{A:()=>r});const r=t.p+"assets/images/bundler-build-3-afd8f47db82d3abee7287fca6dfb3a14.png"},6865:(e,n,t)=>{t.d(n,{A:()=>r});const r=t.p+"assets/images/bundler-build-with-params-1-ad0d371c95608944458a6b6b8d738879.png"},4835:(e,n,t)=>{t.d(n,{A:()=>r});const r=t.p+"assets/images/bundler-slack-cbeb1b7fb299ba21d2ecdc726c0294ed.png"},7562:(e,n,t)=>{t.d(n,{A:()=>r});const r=t.p+"assets/images/bundler-unbundler-7d07e901fea352cc616286780553546b.png"},6611:(e,n,t)=>{t.d(n,{A:()=>r});const r=t.p+"assets/images/unbundler-browse-file-1-e95c1df07dad8ed3db3311217100081e.png"},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>a});var r=t(6540);const l={},i=r.createContext(l);function s(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:s(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);