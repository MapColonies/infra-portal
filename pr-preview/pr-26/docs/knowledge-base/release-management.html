<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-knowledge-base/release-management/release-management" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Release Management | Infra Portal</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://mapcolonies.github.io/infra-portal/pr-preview/pr-26/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://mapcolonies.github.io/infra-portal/pr-preview/pr-26/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://mapcolonies.github.io/infra-portal/pr-preview/pr-26/docs/knowledge-base/release-management"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Release Management | Infra Portal"><meta data-rh="true" name="description" content="This document outlines the release management process for Libot Mipuy, which involves multiple teams and services."><meta data-rh="true" property="og:description" content="This document outlines the release management process for Libot Mipuy, which involves multiple teams and services."><link data-rh="true" rel="icon" href="/infra-portal/pr-preview/pr-26/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://mapcolonies.github.io/infra-portal/pr-preview/pr-26/docs/knowledge-base/release-management"><link data-rh="true" rel="alternate" href="https://mapcolonies.github.io/infra-portal/pr-preview/pr-26/docs/knowledge-base/release-management" hreflang="en"><link data-rh="true" rel="alternate" href="https://mapcolonies.github.io/infra-portal/pr-preview/pr-26/docs/knowledge-base/release-management" hreflang="x-default"><link rel="stylesheet" href="/infra-portal/pr-preview/pr-26/assets/css/styles.fd2afb1a.css">
<script src="/infra-portal/pr-preview/pr-26/assets/js/runtime~main.d310fd89.js" defer="defer"></script>
<script src="/infra-portal/pr-preview/pr-26/assets/js/main.747968cf.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/infra-portal/pr-preview/pr-26/"><div class="navbar__logo"><img src="/infra-portal/pr-preview/pr-26/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/infra-portal/pr-preview/pr-26/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Infra Portal</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/infra-portal/pr-preview/pr-26/docs/knowledge-base">Knowledge Base</a><a class="navbar__item navbar__link" href="/infra-portal/pr-preview/pr-26/docs/guides">Guides</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/MapColonies/infra-portal" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/infra-portal/pr-preview/pr-26/docs/knowledge-base">Knowledge Base</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/infra-portal/pr-preview/pr-26/docs/knowledge-base/config-management">Config Management</a><button aria-label="Expand sidebar category &#x27;Config Management&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/infra-portal/pr-preview/pr-26/docs/category/json-schema">JSON Schema</a><button aria-label="Expand sidebar category &#x27;JSON Schema&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/infra-portal/pr-preview/pr-26/docs/knowledge-base/monitoring">Monitoring</a><button aria-label="Expand sidebar category &#x27;Monitoring&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/infra-portal/pr-preview/pr-26/docs/category/packages">Packages</a><button aria-label="Expand sidebar category &#x27;Packages&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/infra-portal/pr-preview/pr-26/docs/knowledge-base/release-management">Release Management</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/infra-portal/pr-preview/pr-26/docs/category/pipelines">DevOps</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/infra-portal/pr-preview/pr-26/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Release Management</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Release Management Guide</h1></header>
<p>This document outlines the release management process for Libot Mipuy, which involves multiple teams and services.
The release strategy follows semantic versioning (<a href="https://semver.org/" target="_blank" rel="noopener noreferrer">SemVer</a>) for individual services and the &quot;Libot version&quot; which is used for managing our deployment stack in different networks.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="libot-version-tag">Libot Version Tag<a href="#libot-version-tag" class="hash-link" aria-label="Direct link to Libot Version Tag" title="Direct link to Libot Version Tag">​</a></h2>
<p>The <strong>Libot Version</strong> is an alias to a specific <code>helm-charts</code> release version.
This means that it represents the entirety of all service releases for the production deployment and it&#x27;s structure.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="service-branching-strategy">Service Branching Strategy<a href="#service-branching-strategy" class="hash-link" aria-label="Direct link to Service Branching Strategy" title="Direct link to Service Branching Strategy">​</a></h2>
<p>Each service must maintain at least one main branch to track the latest stable release and major version updates:</p>
<ol>
<li><strong><code>master</code></strong>:<!-- -->
<ul>
<li>Represents the latest stable version of the service.</li>
<li>Merges to this branch indicate the most recent production-ready release.</li>
</ul>
</li>
<li><strong><code>MAJOR.x.x</code></strong> (e.g., <code>1.x.x</code>, <code>2.x.x</code>):<!-- -->
<ul>
<li>Tracks the major version series of a service.</li>
<li>A new branch is created for every major version that is smaller than the latest major version.</li>
<li>Example:<!-- -->
<ul>
<li>If a service&#x27;s latest release version is <code>3.3.0</code> and a new bug fix needs to be merged to latest release with major version &#x27;2&#x27;,
a pull request (PR) will be created for both:<!-- -->
<ul>
<li><code>master</code> (represents 3.x.x) - only if the bug fix relevant to this release too</li>
<li><code>2.x.x</code> (to track the new version with the fix).</li>
</ul>
</li>
<li>Once merged, both branches will represent a release with the bug fix, while the <code>1.x.x</code> branch remains unchanged.</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="service-release-flow">Service Release Flow<a href="#service-release-flow" class="hash-link" aria-label="Direct link to Service Release Flow" title="Direct link to Service Release Flow">​</a></h2>
<p><img decoding="async" loading="lazy" alt="Releasing Flow" src="/infra-portal/pr-preview/pr-26/assets/images/release-on-repo-85c09b71b450cb7a6754bf597310c814.png" width="792" height="207" class="img_ev3q"></p>
<p>Explanation:</p>
<ol>
<li>
<p>The developer creates a PR</p>
</li>
<li>
<p>On merging to master <code>release-please</code> takes action and opens a release PR with these changes:</p>
<ul>
<li>Updating all relevant files with the new release version</li>
<li>Updating Changelog with the new version details</li>
<li>Updating helm (chart version)</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>The release version will be based on <a href="https://semver.org/" target="_blank" rel="noopener noreferrer">SemVer</a> (according to the PR title that will abide <a href="https://github.com/conventional-changelog/commitlint" target="_blank" rel="noopener noreferrer">commitlint</a>)</p></div></div>
</li>
<li>
<p>On merging the release PR to master, <code>release-please</code> will create a new release</p>
</li>
<li>
<p>On new release, some automate workflows will be triggered:</p>
<ul>
<li>Push to <code>NPM</code> (for libraries)</li>
<li>Build a docker image and push to registry (if a <code>Dockerfile</code> exists)</li>
<li>Pack the helm chart and push to registry (if a <code>helm</code> chart exists)</li>
</ul>
</li>
</ol>
<p><strong>End State:</strong></p>
<ul>
<li>New release version based on <code>SemVer</code></li>
<li>new release points to <code>master</code></li>
<li>New release is pushed to <code>npm</code>, <code>docker</code> and <code>helm</code> registries</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>The deployment flow is described in the next section</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="helming-strategy">Helming Strategy<a href="#helming-strategy" class="hash-link" aria-label="Direct link to Helming Strategy" title="Direct link to Helming Strategy">​</a></h2>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>This strategy does not include the checks you should make during the development process such a running tests.
All of the development tests should occur before release.
We assume that the new released service is properly checked and its updated chart is properly constructed.</p></div></div>
<p><img decoding="async" loading="lazy" alt="Helming Strategy" src="/infra-portal/pr-preview/pr-26/assets/images/helm-strategy-3e111771056bf46cb14dfe51803c3b87.png" width="651" height="314" class="img_ev3q"></p>
<p>The project includes two different repositories that represent two different flows:</p>
<ol>
<li>
<p><strong>Chart Flow using &quot;Helm-Charts&quot; repo</strong> - Handling the new charts and versions from the services and creates a new release version</p>
</li>
<li>
<p><strong>Values Flow using &quot;Helm-Values&quot; repo</strong> - Handling the deployment in openshift based on the new <code>helm-chart</code> version that was created in <code>helm-charts</code></p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="explanation">Explanation<a href="#explanation" class="hash-link" aria-label="Direct link to Explanation" title="Direct link to Explanation">​</a></h3>
<p>The main goal is to separate the development part of <code>helm charts</code> (the structure) from the deployment part (the <code>values</code>).</p>
<p><code>helm-charts</code> repo will contain only the chart, which is the deployment structure, and a default <code>values</code> file.
The structure shouldn&#x27;t change much from now on (for the current set of features).<br>
<code>helm-values</code> repo will contain <strong>only the values based on the relevant chart</strong>
and the <code>helm-chart</code> version it&#x27;s based on (a file named &quot;helm-charts.json&quot; in the repo).
The value files that represent openshift namespaces should not be part of the structure
(as they are only config files), they should be in a different repo.
This gives us the following benefits:</p>
<ol>
<li>
<p><strong>Avoiding &quot;irrelevant&quot; commits</strong><br>
<!-- -->Imagine if we keep the values with the chart. If we want to change the log level, for example, from <code>info</code> to <code>debug</code>,
we will have to commit the change as part of the chart. This is true for all changes made to any value.
This means we will clutter the repo with a lot of commits that don&#x27;t have anything to do with the core of the chart itself.</p>
</li>
<li>
<p><strong>Informative versions for helm-charts</strong><br>
<!-- -->If we keep the chart and the values together, we will have a hard time properly handling the release of helm-chart due to
the many changes on the values (which aren&#x27;t part of a release).
On the other hand, there are some value changes that are more meaningful that we want to document.
For example, you want to change the default port to be 80. This is a &quot;structure&quot; change because you want to set a new default value.
If you keep the values as part of the chart, you won&#x27;t know what requires a new release and what doesn&#x27;t.
When they are separated, it is clearer what changes are a core part of your chart.</p>
</li>
<li>
<p><strong>One true structure</strong>
Currently, the charts in the network are different from the charts in Azure because they can be modified.
Using the new strategy, we make sure that there will be one source of truth which is <code>helm-charts</code>.</p>
</li>
<li>
<p><strong>Simpler deployment</strong><br>
<!-- -->Keeping the values with the core structure forces us to manage every chart (along with the values) in different branches,
which makes it harder to manage.
With the new strategy, we need to only &quot;worry&quot; about the values and the version of the chart before moving on to the deployment.
We can run this command template:<br>
<code>helm install myrelease oci://HELM_REGISTRY/helm-charts/raster-ingestion --version VERSION</code><br>
<!-- -->And that&#x27;s it! We don&#x27;t need the chart in the repo anymore. We make the structure and the config independent of each other.</p>
</li>
</ol>
<p>Let&#x27;s walk through the flows!</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="chart-flow">Chart Flow<a href="#chart-flow" class="hash-link" aria-label="Direct link to Chart Flow" title="Direct link to Chart Flow">​</a></h3>
<p><img decoding="async" loading="lazy" alt="Chart Flow" src="/infra-portal/pr-preview/pr-26/assets/images/chart-flow-397743534ac264f9679180cf205b022c.png" width="646" height="159" class="img_ev3q"></p>
<p>This flow handles the update of <code>helm-charts</code> and the creation of a new release version.</p>
<ol>
<li>When a service has a new release and helm folder (points that its chart in helm-charts needs to be updated),
open a PR in helm-charts that update the version of the service.</li>
</ol>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>The developer should see the PR and make more changes if necessary</p></div></div>
<ol start="2">
<li>After the PR is ready, merge the PR.</li>
</ol>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>The PR accumulates changes made from multiple repositories, updating the versions of services in the chart as you release them.
Notice that it isn&#x27;t necessary to merge every change, this way you can accumulate changes until you have your stable team (or multiple teams) version.</p><div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>If there is a service that you don&#x27;t want to include it yet in helm-charts, you can disable the workflow that triggers that PR</p></div></div></div></div>
<ol start="3">
<li>On &quot;master&quot; push:<!-- -->
<ul>
<li>
<p>Create a new release using release-please.
The release-please should also update the docker and helm versions of the services in:</p>
<ul>
<li><code>artifacts.json</code> file inside the domain that represent the information of all services and versions of the domain</li>
<li><code>libot-artifacts.json</code> in the root directory that represent the information of all services and versions of <strong>all</strong> domains</li>
</ul>
</li>
<li>
<p>Package all the charts and push them to helm registry.<br>
<!-- -->For example:<br>
<!-- -->On new <code>helm-chart</code> release with version 3.0.1, we will push to helm registry the raster-ingestion chart with this name: <code>rater-ingestion-3.0.1</code>.</p>
</li>
</ul>
</li>
</ol>
<p><strong>End State</strong>:</p>
<ul>
<li>New &quot;Helm-Chart Version&quot;</li>
<li>Charts of the new version packed in helm registry.</li>
</ul>
<p>Now, we have an updated structure of the chart and we can move on to the values.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="values-flow">Values Flow<a href="#values-flow" class="hash-link" aria-label="Direct link to Values Flow" title="Direct link to Values Flow">​</a></h3>
<p><img decoding="async" loading="lazy" alt="Values Flow" src="/infra-portal/pr-preview/pr-26/assets/images/values-flow-f649e06d592d2a3452ca8d5605b567e0.png" width="642" height="202" class="img_ev3q"></p>
<p>This flow suppose to handle the update of the namespaces values (integration and prod) and the deployment in openshift.</p>
<ol start="0">
<li>
<p>On new release, there will be a PR on stage branch in <code>helm-values</code> repo that updates the &quot;Helm-Chart Version&quot; in <code>helm-charts.json</code> file</p>
</li>
<li>
<p>There will be an auto deploy in &quot;integration&quot; namespace</p>
</li>
<li>
<p>After running and testing the new chart (locally and remotely) and making sure the structure and values work as intended, you may merge the PR</p>
</li>
<li>
<p>Once the stage branch is updated, a new PR will be automatically created in &quot;prod&quot; branch to update the <code>helm-charts</code> version in the file</p>
</li>
</ol>
<p>After the PR to the prod branch is created, it is the developer&#x27;s responsibility to deploy and merge the PR.</p>
<p><strong>End State</strong>:</p>
<ul>
<li>Updated values in all branches based on <code>helm-charts</code> version</li>
<li>Updated <code>helm-charts.json</code> file in every branch</li>
<li>Updated deployments in all namespaces in openshift</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>The values flow is the same flow in the network.
There will be helm-values repo based on branches (each branch will represent a namespace in openshift)
and in every branch there will be a file named: <code>helm-charts.json</code> that will represent the related chart version</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="libot-version-strategy">Libot Version Strategy<a href="#libot-version-strategy" class="hash-link" aria-label="Direct link to Libot Version Strategy" title="Direct link to Libot Version Strategy">​</a></h2>
<p><img decoding="async" loading="lazy" alt="Libot Version Strategy" src="/infra-portal/pr-preview/pr-26/assets/images/libot-version-strategy-25dadfb3d4ce09b6fbc8cfa3f3db9b44.png" width="701" height="208" class="img_ev3q"></p>
<p>This flow handles the release of &quot;<a href="#libot-version-tag">Libot Version</a>&quot;.</p>
<ol>
<li>
<p>Trigger through Jenkins the creation of new Libot Release Version.
The pipeline will allow you to choose from one of <code>helm-charts</code> releases the release you want to sign as new &quot;Libot Version&quot;</p>
</li>
<li>
<p>Jenkins will document in confluence the difference between the latest Libot Version and the new one that was just created.
The document should include also the changelog of the actual services rather than just the versions diff.</p>
</li>
<li>
<p>At the end, the pipeline will trigger the bundler pipeline</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bundle-strategy">Bundle Strategy<a href="#bundle-strategy" class="hash-link" aria-label="Direct link to Bundle Strategy" title="Direct link to Bundle Strategy">​</a></h2>
<p><img decoding="async" loading="lazy" alt="Bundling Strategy" src="/infra-portal/pr-preview/pr-26/assets/images/bundler-strategy-9d9a9576be6f7d4a51cfe25e28288ea9.png" width="572" height="225" class="img_ev3q"></p>
<p>You can see more about bundler and unbundler <a href="/infra-portal/pr-preview/pr-26/docs/knowledge-base/DevOps/pipelines/bundler-unbundler">here</a>.<br>
<!-- -->The only change is that the bundler pipeline will be able to create a bundle based on either <code>helm-charts</code> version or &quot;Libot Version&quot;.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/MapColonies/infra-portal/tree/master/docs/knowledge-base/release-management/release-management.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/infra-portal/pr-preview/pr-26/docs/knowledge-base/packages/tsconfig"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">tsconfig</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/infra-portal/pr-preview/pr-26/docs/category/pipelines"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Pipelines</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#libot-version-tag" class="table-of-contents__link toc-highlight">Libot Version Tag</a></li><li><a href="#service-branching-strategy" class="table-of-contents__link toc-highlight">Service Branching Strategy</a></li><li><a href="#service-release-flow" class="table-of-contents__link toc-highlight">Service Release Flow</a></li><li><a href="#helming-strategy" class="table-of-contents__link toc-highlight">Helming Strategy</a><ul><li><a href="#explanation" class="table-of-contents__link toc-highlight">Explanation</a></li><li><a href="#chart-flow" class="table-of-contents__link toc-highlight">Chart Flow</a></li><li><a href="#values-flow" class="table-of-contents__link toc-highlight">Values Flow</a></li></ul></li><li><a href="#libot-version-strategy" class="table-of-contents__link toc-highlight">Libot Version Strategy</a></li><li><a href="#bundle-strategy" class="table-of-contents__link toc-highlight">Bundle Strategy</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/infra-portal/pr-preview/pr-26/docs/knowledge-base">Knowledge Base</a></li><li class="footer__item"><a class="footer__link-item" href="/infra-portal/pr-preview/pr-26/docs/guides">Guides</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Infra Portal, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>