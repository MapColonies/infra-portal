"use strict";(self.webpackChunk_map_colonies_openapi_helpers=self.webpackChunk_map_colonies_openapi_helpers||[]).push([[4339],{3232:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>h,contentTitle:()=>d,default:()=>u,frontMatter:()=>c,metadata:()=>t,toc:()=>m});const t=JSON.parse('{"id":"knowledge-base/json-schema/json-schema-tips","title":"JSON Schema Tips","description":"Metadata","source":"@site/docs/knowledge-base/json-schema/json-schema-tips.mdx","sourceDirName":"knowledge-base/json-schema","slug":"/knowledge-base/json-schema/json-schema-tips","permalink":"/infra-portal/pr-preview/pr-26/docs/knowledge-base/json-schema/json-schema-tips","draft":false,"unlisted":false,"editUrl":"https://github.com/MapColonies/infra-portal/tree/master/docs/knowledge-base/json-schema/json-schema-tips.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"knowledgeBaseSidebar","previous":{"title":"JSON Schema","permalink":"/infra-portal/pr-preview/pr-26/docs/category/json-schema"},"next":{"title":"MonitoringSchema","permalink":"/infra-portal/pr-preview/pr-26/docs/knowledge-base/monitoring/"}}');var r=s(7773),i=s(6636),a=(s(8441),s(6045));const o={tableOfContentsInline:"tableOfContentsInline_h3lp"};function l(e){var n=e.toc,s=e.minHeadingLevel,t=e.maxHeadingLevel;return(0,r.jsx)("div",{className:o.tableOfContentsInline,children:(0,r.jsx)(a.A,{toc:n,minHeadingLevel:s,maxHeadingLevel:t,className:"table-of-contents",linkClassName:null})})}const c={sidebar_position:2},d="JSON Schema Tips",h={},m=[{value:"Metadata",id:"metadata",level:2},{value:"Examples",id:"examples",level:2},{value:"Comments",id:"comments",level:2},{value:"Default",id:"default",level:2},{value:"Required",id:"required",level:2},{value:"Enums",id:"enums",level:2},{value:"Refs",id:"refs",level:2},{value:"Internal Refs",id:"internal-refs",level:3},{value:"External Refs",id:"external-refs",level:3},{value:"Definitions",id:"definitions",level:2},{value:"Schema Composition",id:"schema-composition",level:2},{value:"AllOf",id:"allof",level:3},{value:"OneOf",id:"oneof",level:3},{value:"Strings",id:"strings",level:2},{value:"Formats",id:"formats",level:3},{value:"Patterns",id:"patterns",level:3},{value:"Const",id:"const",level:3}];function p(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"json-schema-tips",children:"JSON Schema Tips"})}),"\n",(0,r.jsx)(l,{toc:m}),"\n",(0,r.jsx)(n.h2,{id:"metadata",children:"Metadata"}),"\n",(0,r.jsxs)(n.p,{children:["You should use the ",(0,r.jsx)(n.code,{children:"title"})," and ",(0,r.jsx)(n.code,{children:"description"})," keywords to provide a description of the schema. This will help users understand what the schema is for."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "title": "My Schema",\n  "description": "This is a schema for my app"\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,r.jsxs)(n.p,{children:["You can provide examples of how the schema should be used by using the ",(0,r.jsx)(n.code,{children:"examples"})," keyword."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "object",\n  "properties": {\n    "name": {\n      "type": "string"\n    }\n  },\n  "examples": {\n    "name": "John Doe"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"comments",children:"Comments"}),"\n",(0,r.jsxs)(n.p,{children:["You can use the ",(0,r.jsx)(n.code,{children:"$comment"})," keyword to provide comments in the schema. This can be useful for providing additional information about the schema."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "object",\n  "properties": {\n    "name": {\n      "type": "string"\n    }\n  },\n  "$comment": "This is a schema for my app"\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["For more information check the relevant ",(0,r.jsx)(n.a,{href:"https://json-schema.org/understanding-json-schema/reference/comments",children:"JSON Schema Docs"})]}),"\n",(0,r.jsx)(n.h2,{id:"default",children:"Default"}),"\n",(0,r.jsxs)(n.p,{children:["When you have a default value for a property, you can use the ",(0,r.jsx)(n.code,{children:"default"})," keyword to set it. This is useful for when you want to provide a default value for a property that is not required."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "object",\n  "properties": {\n    "name": {\n      "type": "string",\n      "default": "John Doe"\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"The value will be provided by the config even if it is not set."}),"\n",(0,r.jsx)(n.h2,{id:"required",children:"Required"}),"\n",(0,r.jsxs)(n.p,{children:["You can use the ",(0,r.jsx)(n.code,{children:"required"})," keyword to specify which properties are required in the schema.\nBy default, all properties are optional."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "object",\n  "properties": {\n    "name": {\n      "type": "string"\n    }\n  },\n  "required": ["name"]\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"The types generated for the schema will reflect the required properties."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"type MySchema = {\n  name: string;\n};\n"})}),"\n",(0,r.jsx)(n.h2,{id:"enums",children:"Enums"}),"\n",(0,r.jsxs)(n.p,{children:["You can use the ",(0,r.jsx)(n.code,{children:"enum"})," keyword to specify a list of possible values for a property.\nIt is not required to specify the type of the property when using ",(0,r.jsx)(n.code,{children:"enum"}),", so its possible for the enum to be of different types."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "object",\n  "properties": {\n    "color": {\n      "enum": ["red", "green", "blue"]\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"The types generated will be a union of the enum values."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'type MySchema = {\n  color: "red" | "green" | "blue";\n};\n'})}),"\n",(0,r.jsx)(n.h2,{id:"refs",children:"Refs"}),"\n",(0,r.jsxs)(n.p,{children:["You can use the ",(0,r.jsx)(n.code,{children:"$ref"})," keyword to reference another schema.\nThe references can be either internal or external."]}),"\n",(0,r.jsx)(n.p,{children:"Reference can be used to reuse schemas and keep the schema definitions clean. Even for small schemas like Id, it is a good practice to use refs."}),"\n",(0,r.jsx)(n.h3,{id:"internal-refs",children:"Internal Refs"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "object",\n  "properties": {\n    "name": {\n      "$ref": "#/definitions/name"\n    }\n  },\n  "definitions": {\n    "name": {\n      "type": "string"\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"external-refs",children:"External Refs"}),"\n",(0,r.jsx)(n.p,{children:"External refs are only valid to other schemas that are defined in the schemas repository. The way to reference is to use the ID of required the schema."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "object",\n  "properties": {\n    "name": {\n      "$ref": "https://mapcolonies.com/common/schema/v1"\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"definitions",children:"Definitions"}),"\n",(0,r.jsxs)(n.p,{children:["You can use the ",(0,r.jsx)(n.code,{children:"definitions"})," keyword to define reusable schemas. The definitions are not part of the validated schema, unless they are referenced."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "object",\n  "properties": {\n    "name": {\n      "$ref": "#/definitions/name"\n    }\n  },\n  "definitions": {\n    "name": {\n      "type": "string"\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"schema-composition",children:"Schema Composition"}),"\n",(0,r.jsx)(n.p,{children:"In many cases you will want to compose multiple schemas together. JSON Schema provides a few keywords to help with this.\nThis way you can reuse schemas and keep the schema definitions clean."}),"\n",(0,r.jsx)(n.p,{children:"The classic example in our case is to extends the boilerplate schema to fit our service."}),"\n",(0,r.jsxs)(n.p,{children:["For more information check the relevant ",(0,r.jsx)(n.a,{href:"https://json-schema.org/understanding-json-schema/reference/combining",children:"JSON Schema Docs"})]}),"\n",(0,r.jsx)(n.h3,{id:"allof",children:"AllOf"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"allOf"})," keyword is used to combine multiple schemas together. The properties of the schemas are merged together."]}),"\n",(0,r.jsx)(n.p,{children:"The following schema"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "allOf": [\n    {\n      "type": "object",\n      "properties": {\n        "name": {\n          "type": "string"\n        }\n      }\n    },\n    {\n      "type": "object",\n      "properties": {\n        "age": {\n          "type": "number"\n        }\n      }\n    }\n  ]\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Will be equivalent to the following schema"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "object",\n  "properties": {\n    "name": {\n      "type": "string"\n    },\n    "age": {\n      "type": "number"\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.admonition,{type:"important",children:(0,r.jsxs)(n.p,{children:["When using ",(0,r.jsx)(n.code,{children:"additionalProperties: false"})," in the schemas, the ",(0,r.jsx)(n.code,{children:"allOf"})," keyword will not merge the properties together. Instead, it will require that all properties are present in the schema, Which is not possible.\nCheck the ",(0,r.jsx)(n.a,{href:"https://json-schema.org/understanding-json-schema/reference/object#extending",children:"JSON Schema Docs"})," for more information."]})}),"\n",(0,r.jsx)(n.h3,{id:"oneof",children:"OneOf"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"oneOf"})," keyword is used to specify that only one of the schemas should be valid."]}),"\n",(0,r.jsx)(n.p,{children:"The following schema"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "oneOf": [\n    {\n      "type": "object",\n      "properties": {\n        "name": {\n          "type": "string"\n        }\n      }\n    },\n    {\n      "type": "object",\n      "properties": {\n        "age": {\n          "type": "number"\n        }\n      }\n    }\n  ]\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"If both properties are provided, the schema will be invalid."}),"\n",(0,r.jsx)(n.h2,{id:"strings",children:"Strings"}),"\n",(0,r.jsx)(n.h3,{id:"formats",children:"Formats"}),"\n",(0,r.jsxs)(n.p,{children:["It is recommended to use the ",(0,r.jsx)(n.code,{children:"format"})," keyword to specify the format of the string. This will help users understand what the string is for and validate accordingly."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "string",\n  "format": "email"\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["For a full list of formats check the ",(0,r.jsx)(n.a,{href:"https://github.com/ajv-validator/ajv-formats?tab=readme-ov-file#formats",children:"ajv-formats"})," repository."]}),"\n",(0,r.jsx)(n.h3,{id:"patterns",children:"Patterns"}),"\n",(0,r.jsxs)(n.p,{children:["You can use the ",(0,r.jsx)(n.code,{children:"pattern"})," keyword to specify a regular expression that the string should match."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "string",\n  "pattern": "^[a-zA-Z]+$"\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"const",children:"Const"}),"\n",(0,r.jsxs)(n.p,{children:["You can use the ",(0,r.jsx)(n.code,{children:"const"})," keyword to specify a constant value for the string."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "type": "string",\n  "const": "John Doe"\n}\n'})})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},6045:(e,n,s)=>{s.d(n,{A:()=>v});var t=s(5450),r=s(8441),i=s(9548),a=["parentIndex"];function o(e){var n=e.map((function(e){return Object.assign({},e,{parentIndex:-1,children:[]})})),s=Array(7).fill(-1);n.forEach((function(e,n){var t=s.slice(2,e.level);e.parentIndex=Math.max.apply(Math,t),s[e.level]=n}));var r=[];return n.forEach((function(e){var s=e.parentIndex,i=(0,t.A)(e,a);s>=0?n[s].children.push(i):r.push(i)})),r}function l(e){var n=e.toc,s=e.minHeadingLevel,t=e.maxHeadingLevel;return n.flatMap((function(e){var n=l({toc:e.children,minHeadingLevel:s,maxHeadingLevel:t});return function(e){return e.level>=s&&e.level<=t}(e)?[Object.assign({},e,{children:n})]:n}))}function c(e){var n=e.getBoundingClientRect();return n.top===n.bottom?c(e.parentNode):n}function d(e,n){var s,t,r=n.anchorTopOffset,i=e.find((function(e){return c(e).top>=r}));return i?function(e){return e.top>0&&e.bottom<window.innerHeight/2}(c(i))?i:null!=(t=e[e.indexOf(i)-1])?t:null:null!=(s=e[e.length-1])?s:null}function h(){var e=(0,r.useRef)(0),n=(0,i.p)().navbar.hideOnScroll;return(0,r.useEffect)((function(){e.current=n?0:document.querySelector(".navbar").clientHeight}),[n]),e}function m(e){var n=(0,r.useRef)(void 0),s=h();(0,r.useEffect)((function(){if(!e)return function(){};var t=e.linkClassName,r=e.linkActiveClassName,i=e.minHeadingLevel,a=e.maxHeadingLevel;function o(){var e=function(e){return Array.from(document.getElementsByClassName(e))}(t),o=function(e){for(var n=e.minHeadingLevel,s=e.maxHeadingLevel,t=[],r=n;r<=s;r+=1)t.push("h"+r+".anchor");return Array.from(document.querySelectorAll(t.join()))}({minHeadingLevel:i,maxHeadingLevel:a}),l=d(o,{anchorTopOffset:s.current}),c=e.find((function(e){return l&&l.id===function(e){return decodeURIComponent(e.href.substring(e.href.indexOf("#")+1))}(e)}));e.forEach((function(e){!function(e,s){s?(n.current&&n.current!==e&&n.current.classList.remove(r),e.classList.add(r),n.current=e):e.classList.remove(r)}(e,e===c)}))}return document.addEventListener("scroll",o),document.addEventListener("resize",o),o(),function(){document.removeEventListener("scroll",o),document.removeEventListener("resize",o)}}),[e,s])}var p=s(4792),u=s(7773);function f(e){var n=e.toc,s=e.className,t=e.linkClassName,r=e.isChild;return n.length?(0,u.jsx)("ul",{className:r?void 0:s,children:n.map((function(e){return(0,u.jsxs)("li",{children:[(0,u.jsx)(p.A,{to:"#"+e.id,className:null!=t?t:void 0,dangerouslySetInnerHTML:{__html:e.value}}),(0,u.jsx)(f,{isChild:!0,toc:e.children,className:s,linkClassName:t})]},e.id)}))}):null}const j=r.memo(f);var x=["toc","className","linkClassName","linkActiveClassName","minHeadingLevel","maxHeadingLevel"];function v(e){var n=e.toc,s=e.className,a=void 0===s?"table-of-contents table-of-contents__left-border":s,c=e.linkClassName,d=void 0===c?"table-of-contents__link":c,h=e.linkActiveClassName,p=void 0===h?void 0:h,f=e.minHeadingLevel,v=e.maxHeadingLevel,g=(0,t.A)(e,x),y=(0,i.p)(),b=null!=f?f:y.tableOfContents.minHeadingLevel,w=null!=v?v:y.tableOfContents.maxHeadingLevel,k=function(e){var n=e.toc,s=e.minHeadingLevel,t=e.maxHeadingLevel;return(0,r.useMemo)((function(){return l({toc:o(n),minHeadingLevel:s,maxHeadingLevel:t})}),[n,s,t])}({toc:n,minHeadingLevel:b,maxHeadingLevel:w});return m((0,r.useMemo)((function(){if(d&&p)return{linkClassName:d,linkActiveClassName:p,minHeadingLevel:b,maxHeadingLevel:w}}),[d,p,b,w])),(0,u.jsx)(j,Object.assign({toc:k,className:a,linkClassName:d},g))}},6636:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>o});var t=s(8441);const r={},i=t.createContext(r);function a(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);