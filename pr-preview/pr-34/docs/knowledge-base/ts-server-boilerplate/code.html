<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-knowledge-base/ts-server-boilerplate/code" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.3">
<title data-rh="true">Code | Infra Portal</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://mapcolonies.github.io/infra-portal/pr-preview/pr-34/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://mapcolonies.github.io/infra-portal/pr-preview/pr-34/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://mapcolonies.github.io/infra-portal/pr-preview/pr-34/docs/knowledge-base/ts-server-boilerplate/code"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Code | Infra Portal"><meta data-rh="true" name="description" content="The boilerplate code is written in TypeScript and uses the Express.js framework. Some of the source code goal is to provide a basic structure for the code, with packages that provide features that gives a good starting point for a new project. The business logic itself resides in the in resource directories under the src/ directory. In the boilerplate, the resources are resourceName and anotherResource, but you can rename them to match your project."><meta data-rh="true" property="og:description" content="The boilerplate code is written in TypeScript and uses the Express.js framework. Some of the source code goal is to provide a basic structure for the code, with packages that provide features that gives a good starting point for a new project. The business logic itself resides in the in resource directories under the src/ directory. In the boilerplate, the resources are resourceName and anotherResource, but you can rename them to match your project."><link data-rh="true" rel="icon" href="/infra-portal/pr-preview/pr-34/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://mapcolonies.github.io/infra-portal/pr-preview/pr-34/docs/knowledge-base/ts-server-boilerplate/code"><link data-rh="true" rel="alternate" href="https://mapcolonies.github.io/infra-portal/pr-preview/pr-34/docs/knowledge-base/ts-server-boilerplate/code" hreflang="en"><link data-rh="true" rel="alternate" href="https://mapcolonies.github.io/infra-portal/pr-preview/pr-34/docs/knowledge-base/ts-server-boilerplate/code" hreflang="x-default"><link rel="stylesheet" href="/infra-portal/pr-preview/pr-34/assets/css/styles.76f29c7e.css">
<script src="/infra-portal/pr-preview/pr-34/assets/js/runtime~main.62c9cb3e.js" defer="defer"></script>
<script src="/infra-portal/pr-preview/pr-34/assets/js/main.0557c141.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_cRux" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/infra-portal/pr-preview/pr-34/"><div class="navbar__logo"><img src="/infra-portal/pr-preview/pr-34/img/logo.svg" alt="My Site Logo" class="themedComponent_eXA0 themedComponent--light_QuRo"><img src="/infra-portal/pr-preview/pr-34/img/logo.svg" alt="My Site Logo" class="themedComponent_eXA0 themedComponent--dark_BVtZ"></div><b class="navbar__title text--truncate">Infra Portal</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/infra-portal/pr-preview/pr-34/docs/knowledge-base">Knowledge Base</a><a class="navbar__item navbar__link" href="/infra-portal/pr-preview/pr-34/docs/guides">Guides</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/MapColonies/infra-portal" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_hpel"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_XVk1 colorModeToggle_y7fn"><button class="clean-btn toggleButton_cQi8 toggleButtonDisabled_abZD" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_UTPW"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_If7A"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_q0Mb"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_Nqgd"><div class="docsWrapper_aLAo"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_TfZN" type="button"></button><div class="docRoot_MrbX"><aside class="theme-doc-sidebar-container docSidebarContainer_JF60"><div class="sidebarViewport_gvIx"><div class="sidebar_gw9e"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_I2Yc"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/infra-portal/pr-preview/pr-34/docs/knowledge-base">Knowledge Base</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/infra-portal/pr-preview/pr-34/docs/knowledge-base/config-management">Config Management</a><button aria-label="Expand sidebar category &#x27;Config Management&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/infra-portal/pr-preview/pr-34/docs/category/json-schema">JSON Schema</a><button aria-label="Expand sidebar category &#x27;JSON Schema&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/infra-portal/pr-preview/pr-34/docs/knowledge-base/monitoring">Monitoring</a><button aria-label="Expand sidebar category &#x27;Monitoring&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/infra-portal/pr-preview/pr-34/docs/category/packages">Packages</a><button aria-label="Expand sidebar category &#x27;Packages&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/infra-portal/pr-preview/pr-34/docs/category/pipelines">DevOps</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/infra-portal/pr-preview/pr-34/docs/knowledge-base/ts-server-boilerplate">TypeScript Server Boilerplate</a><button aria-label="Collapse sidebar category &#x27;TypeScript Server Boilerplate&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/infra-portal/pr-preview/pr-34/docs/knowledge-base/ts-server-boilerplate/code">Code</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/infra-portal/pr-preview/pr-34/docs/knowledge-base/ts-server-boilerplate/tests">Tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/infra-portal/pr-preview/pr-34/docs/knowledge-base/ts-server-boilerplate/repo">Repo configuration and validation</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_rVw6"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_U4vV"><div class="docItemContainer_IbUB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_iWqV" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/infra-portal/pr-preview/pr-34/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YQul"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/infra-portal/pr-preview/pr-34/docs/knowledge-base/ts-server-boilerplate"><span itemprop="name">TypeScript Server Boilerplate</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Code</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_jC1x theme-doc-toc-mobile tocMobile_yKjG"><button type="button" class="clean-btn tocCollapsibleButton_gQRA">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Code</h1></header><p>The boilerplate code is written in <a href="https://www.typescriptlang.org/" target="_blank" rel="noopener noreferrer">TypeScript</a> and uses the <a href="https://expressjs.com/" target="_blank" rel="noopener noreferrer">Express.js</a> framework. Some of the source code goal is to provide a basic structure for the code, with packages that provide features that gives a good starting point for a new project. The business logic itself resides in the in resource directories under the <code>src/</code> directory. In the boilerplate, the resources are <code>resourceName</code> and <code>anotherResource</code>, but you can rename them to match your project.</p>
<h2 class="anchor anchorWithStickyNavbar_vgF6" id="index">index<a href="#index" class="hash-link" aria-label="Direct link to index" title="Direct link to index">​</a></h2>
<p>The entry point of the application is the <code>src/index.ts</code> file. This file is responsible for starting the server and initializing the application. It imports the necessary modules and starts the server on the specified port.</p>
<p>The file also handles the error handling of critical errors (e.g. not errors that are part of a request).</p>
<h3 class="anchor anchorWithStickyNavbar_vgF6" id="healthcheck">Healthcheck<a href="#healthcheck" class="hash-link" aria-label="Direct link to Healthcheck" title="Direct link to Healthcheck">​</a></h3>
<p>The application healthcheck are configured in the <code>src/healthcheck.ts</code> file. This file is responsible for checking the health of the application and returning a response to the client. The healthcheck is configured to return a 200 OK response if the application is healthy, otherwise the application is unhealthy.</p>
<p>You should customize the healthcheck to match your application needs. The default implementation is just a stub.</p>
<p>The healthchecks are implemented using the <a href="https://github.com/godaddy/terminus" target="_blank" rel="noopener noreferrer"><code>@godaddy/terminus</code></a> package.</p>
<h2 class="anchor anchorWithStickyNavbar_vgF6" id="server-builder">Server Builder<a href="#server-builder" class="hash-link" aria-label="Direct link to Server Builder" title="Direct link to Server Builder">​</a></h2>
<p>The <code>src/serverBuilder.ts</code> file is responsible for creating the Express.js server and configuring it with the necessary middleware and routes.</p>
<h3 class="anchor anchorWithStickyNavbar_vgF6" id="openapi-viewer">Openapi viewer<a href="#openapi-viewer" class="hash-link" aria-label="Direct link to Openapi viewer" title="Direct link to Openapi viewer">​</a></h3>
<p>The OpenAPI viewer is configured and enables to view the OpenAPI documentation in the browser. By default, the OpenAPI viewer is configured to serve the OpenAPI documentation at the <code>/docs/api</code> endpoint. You can customize the endpoint by changing the configuration.</p>
<p>For more information on how to use the OpenAPI viewer, check the <a href="/infra-portal/pr-preview/pr-34/docs/knowledge-base/packages/openapi-express-viewer">openapi-express-viewer documentation</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_vgF6" id="routers">Routers<a href="#routers" class="hash-link" aria-label="Direct link to Routers" title="Direct link to Routers">​</a></h3>
<p>The routers are configured in the <code>src/serverBuilder.ts</code> file. The routers are responsible for handling the requests and returning the responses. The routers are organized by resource, with each resource having its own router.</p>
<p>When adding a new resource, you should create a new router and add it to the <code>src/serverBuilder.ts</code> file. The router should be imported from the resource directory.</p>
<h3 class="anchor anchorWithStickyNavbar_vgF6" id="metrics-middleware">Metrics middleware<a href="#metrics-middleware" class="hash-link" aria-label="Direct link to Metrics middleware" title="Direct link to Metrics middleware">​</a></h3>
<p>The metrics middleware exposes NodeJS, express and custom metrics to <a href="https://prometheus.io/" target="_blank" rel="noopener noreferrer">Prometheus</a>. The metrics are exposed at the <code>/metrics</code> endpoint.</p>
<p>For more information check the <a href="/infra-portal/pr-preview/pr-34/docs/knowledge-base/packages/telemetry">MapColonies Telemetry package</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_vgF6" id="http-logger">http logger<a href="#http-logger" class="hash-link" aria-label="Direct link to http logger" title="Direct link to http logger">​</a></h3>
<p>The HTTP logger middleware is responsible for logging the requests and responses. The logger is configured to use the application logger to log those requests.</p>
<p>For more information check the <a href="/infra-portal/pr-preview/pr-34/docs/knowledge-base/packages/express-access-log-middleware">express-access-log-middleware package</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_vgF6" id="openapi-validator">openapi validator<a href="#openapi-validator" class="hash-link" aria-label="Direct link to openapi validator" title="Direct link to openapi validator">​</a></h3>
<p>The boilerplate validates all the requests using the <a href="https://cdimascio.github.io/express-openapi-validator-documentation/" target="_blank" rel="noopener noreferrer">express-openapi-validator package</a>. The package uses the OpenAPI schema to validate the requests.</p>
<h3 class="anchor anchorWithStickyNavbar_vgF6" id="error-handler">error handler<a href="#error-handler" class="hash-link" aria-label="Direct link to error handler" title="Direct link to error handler">​</a></h3>
<p>The error handler is responsible for handling the errors that occur in the application. The error handler is configured to return a JSON response with the error message and the status code.</p>
<p>For more information check the <a href="/infra-portal/pr-preview/pr-34/docs/knowledge-base/packages/error-express-handler">error-express-handler package</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_vgF6" id="container-config">Container Config<a href="#container-config" class="hash-link" aria-label="Direct link to Container Config" title="Direct link to Container Config">​</a></h2>
<p>The container config file is responsible for configuring the dependency injection container. The container is used to manage the dependencies of the application and to inject them into the classes that need them.
The container is configured using the <code>tsyringe</code> package. The package is used to create the container and to register the dependencies.</p>
<p>The boilerplate comes with a few default dependencies that are registered in the container. If the registered object is not a class, you can use the interface <code>SERVICES</code> under <code>src/common/constants.ts</code> to make it easier to find and share the registered object.</p>
<p>For more information check the <a href="https://github.com/microsoft/tsyringe" target="_blank" rel="noopener noreferrer"><code>tsyringe</code> package documentation</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_vgF6" id="config">Config<a href="#config" class="hash-link" aria-label="Direct link to Config" title="Direct link to Config">​</a></h2>
<p>The boilerplate is configured with the MapColonies configuration package. The package is used to manage the configuration of the application and to load the configuration from a central server or environment variables.</p>
<p>The config is defined under <code>src/common/config.ts</code> file and uses the schema defined for the boilerplate. As you implement your own service, you should create a new schema that matches your service configuration and extends the boilerplate&#x27;s one.</p>
<p>Check the following resources for more information:</p>
<ul>
<li><a href="/infra-portal/pr-preview/pr-34/docs/knowledge-base/config-management">Config management docs</a></li>
<li><a href="/infra-portal/pr-preview/pr-34/docs/guides/config-management/zero-to-hero">Config getting started guide</a></li>
<li><a href="/infra-portal/pr-preview/pr-34/docs/knowledge-base/packages/config">MapColonies config package</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_vgF6" id="telemetry">Telemetry<a href="#telemetry" class="hash-link" aria-label="Direct link to Telemetry" title="Direct link to Telemetry">​</a></h2>
<p>The boilerplate comes with multiple options to monitor and observe your application. For best results, you should use all of them and tailor them to your needs.</p>
<h3 class="anchor anchorWithStickyNavbar_vgF6" id="logger">Logger<a href="#logger" class="hash-link" aria-label="Direct link to Logger" title="Direct link to Logger">​</a></h3>
<p>The logger used by the boiler plate is MapColonies <a href="/infra-portal/pr-preview/pr-34/docs/knowledge-base/packages/js-logger"><code>js-logger</code></a>. The logger is available for usage by injecting it into your class using the <code>@inject</code> decorator.</p>
<p>The logger is also configured to log the requests and responses using the <code>express-access-log-middleware</code> package as explained <a href="#http-logger">here</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_vgF6" id="metrics">Metrics<a href="#metrics" class="hash-link" aria-label="Direct link to Metrics" title="Direct link to Metrics">​</a></h3>
<p>Metrics are handled by the <a href="https://github.com/siimon/prom-client" target="_blank" rel="noopener noreferrer"><code>prom-client</code></a> package. The metrics are exposed at the <code>/metrics</code> endpoint and are collected by Prometheus. The metrics are configured to collect NodeJS, express and custom metrics.</p>
<p>Information about the metrics middleware is also available <a href="#metrics-middleware">here</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_vgF6" id="tracing">Tracing<a href="#tracing" class="hash-link" aria-label="Direct link to Tracing" title="Direct link to Tracing">​</a></h3>
<p>The boilerplate is instrumented using <a href="https://opentelemetry.io/" target="_blank" rel="noopener noreferrer">OpenTelemetry</a>. To ease with the implementation of tracing, the package uses the <a href="/infra-portal/pr-preview/pr-34/docs/knowledge-base/packages/telemetry">Telemetry package</a> that handles the initialization and configuration of the OpenTelemetry SDK. In addition the package also exposes helpers which you can use to instrument your code.</p>
<p>The tracing is defined in the <code>src/common/tracing.ts</code> file and loaded in the <code>src/instrumentation.mts</code> file.</p>
<div class="theme-admonition theme-admonition-warning admonition_gwEV alert alert--warning"><div class="admonitionHeading_pcXC"><span class="admonitionIcon_Z5bO"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_bBcw"><p>The <code>instrumentation.mts</code> file must be loaded before the application loads. This can be done by using NodeJS <code>--import</code> flag. The NPM scripts and dockerfile are already configured to do so. If you are using a different way to load the application, make sure to load the <code>instrumentation.mts</code> file before the application loads.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_vgF6" id="openapi">openapi<a href="#openapi" class="hash-link" aria-label="Direct link to openapi" title="Direct link to openapi">​</a></h2>
<p>The boilerplate is a design first project. You should first design your API using the OpenAPI schema and then implement the code. The OpenAPI schema is located in the <code>openapi</code> directory. The OpenAPI schema is used to generate the types for the project.</p>
<p>For your convenience you can use the <code>openapi-helpers</code> package to type the request handlers in your controllers. For more information check the <a href="/infra-portal/pr-preview/pr-34/docs/knowledge-base/packages/openapi-helpers"><code>openapi-helpers</code></a> package.</p>
<h2 class="anchor anchorWithStickyNavbar_vgF6" id="typescript-paths">TypeScript paths<a href="#typescript-paths" class="hash-link" aria-label="Direct link to TypeScript paths" title="Direct link to TypeScript paths">​</a></h2>
<p>The boilerplate supports the use of TypeScript <a href="https://www.typescriptlang.org/tsconfig/#paths" target="_blank" rel="noopener noreferrer"><code>paths feature</code></a>. You can add your own paths by adding a new one to the <code>tsconfig.json</code> file. The paths are defined under the <code>compilerOptions.paths</code> property.</p>
<p>The aliases are resolved to relative path after compilation using the <a href="https://github.com/justkey007/tsc-alias" target="_blank" rel="noopener noreferrer"><code>tsc-alias</code></a> package. For the tests, the aliases are resolved by mapping the paths using jest.</p>
<h2 class="anchor anchorWithStickyNavbar_vgF6" id="common-folder">Common Folder<a href="#common-folder" class="hash-link" aria-label="Direct link to Common Folder" title="Direct link to Common Folder">​</a></h2>
<p>The <code>src/common</code> directory contains common code that is used by the application. It contains constants, interfaces, and types that are used by the application. You can extends the common code to add your own custom code.</p>
<h2 class="anchor anchorWithStickyNavbar_vgF6" id="resource-structure">Resource Structure<a href="#resource-structure" class="hash-link" aria-label="Direct link to Resource Structure" title="Direct link to Resource Structure">​</a></h2>
<p>Each resource in the project is a directory under the <code>src/</code> directory. The resource directory is separated into the following directories:</p>
<ul>
<li>
<p>Model - Contains your model, types and business logic.</p>
</li>
<li>
<p>Controller - Contains the request handlers for the resource. Anything HTTP related should be in this directory.</p>
</li>
<li>
<p>Routes - Contains the routes that map the request handlers to the endpoints. The routes are defined using the OpenAPI schema. The routes should be added to the router in the <code>src/serverBuilder.ts</code> file.</p>
</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/MapColonies/infra-portal/tree/master/docs/knowledge-base/ts-server-boilerplate/code.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_psaG" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_kgu3"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/infra-portal/pr-preview/pr-34/docs/knowledge-base/ts-server-boilerplate"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">TypeScript Server Boilerplate</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/infra-portal/pr-preview/pr-34/docs/knowledge-base/ts-server-boilerplate/tests"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Tests</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_GlQ0 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#index" class="table-of-contents__link toc-highlight">index</a><ul><li><a href="#healthcheck" class="table-of-contents__link toc-highlight">Healthcheck</a></li></ul></li><li><a href="#server-builder" class="table-of-contents__link toc-highlight">Server Builder</a><ul><li><a href="#openapi-viewer" class="table-of-contents__link toc-highlight">Openapi viewer</a></li><li><a href="#routers" class="table-of-contents__link toc-highlight">Routers</a></li><li><a href="#metrics-middleware" class="table-of-contents__link toc-highlight">Metrics middleware</a></li><li><a href="#http-logger" class="table-of-contents__link toc-highlight">http logger</a></li><li><a href="#openapi-validator" class="table-of-contents__link toc-highlight">openapi validator</a></li><li><a href="#error-handler" class="table-of-contents__link toc-highlight">error handler</a></li></ul></li><li><a href="#container-config" class="table-of-contents__link toc-highlight">Container Config</a></li><li><a href="#config" class="table-of-contents__link toc-highlight">Config</a></li><li><a href="#telemetry" class="table-of-contents__link toc-highlight">Telemetry</a><ul><li><a href="#logger" class="table-of-contents__link toc-highlight">Logger</a></li><li><a href="#metrics" class="table-of-contents__link toc-highlight">Metrics</a></li><li><a href="#tracing" class="table-of-contents__link toc-highlight">Tracing</a></li></ul></li><li><a href="#openapi" class="table-of-contents__link toc-highlight">openapi</a></li><li><a href="#typescript-paths" class="table-of-contents__link toc-highlight">TypeScript paths</a></li><li><a href="#common-folder" class="table-of-contents__link toc-highlight">Common Folder</a></li><li><a href="#resource-structure" class="table-of-contents__link toc-highlight">Resource Structure</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/infra-portal/pr-preview/pr-34/docs/knowledge-base">Knowledge Base</a></li><li class="footer__item"><a class="footer__link-item" href="/infra-portal/pr-preview/pr-34/docs/guides">Guides</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Infra Portal, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>