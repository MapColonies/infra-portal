"use strict";(self.webpackChunk_map_colonies_openapi_helpers=self.webpackChunk_map_colonies_openapi_helpers||[]).push([[9534],{9080:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>f,frontMatter:()=>s,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"knowledge-base/config-management/references","title":"References","description":"One of the biggest advantages of using the configuration management system is that it allows you to manage your configurations in a more organized way.","source":"@site/docs/knowledge-base/config-management/references.mdx","sourceDirName":"knowledge-base/config-management","slug":"/knowledge-base/config-management/references","permalink":"/infra-portal/pr-preview/pr-35/docs/knowledge-base/config-management/references","draft":false,"unlisted":false,"editUrl":"https://github.com/MapColonies/infra-portal/tree/master/docs/knowledge-base/config-management/references.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"References","sidebar_position":2,"toc_min_heading_level":2,"toc_max_heading_level":2},"sidebar":"knowledgeBaseSidebar","previous":{"title":"Config Management - What Is It?","permalink":"/infra-portal/pr-preview/pr-35/docs/knowledge-base/config-management/"},"next":{"title":"Default configs","permalink":"/infra-portal/pr-preview/pr-35/docs/knowledge-base/config-management/default-configs"}}');var o=t(7773),r=t(6636);const s={title:"References",sidebar_position:2,toc_min_heading_level:2,toc_max_heading_level:2},i=void 0,c={},l=[{value:"How does it work",id:"how-does-it-work",level:2},{value:"Reference structure",id:"reference-structure",level:2},{value:"Example usage",id:"example-usage",level:2}];function d(e){const n={admonition:"admonition",code:"code",h2:"h2",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"One of the biggest advantages of using the configuration management system is that it allows you to manage your configurations in a more organized way.\nWhen creating a config instance, its possible to pass a reference to another config instance. This is useful when you want to reuse a configuration in multiple places."}),"\n",(0,o.jsx)(n.h2,{id:"how-does-it-work",children:"How does it work"}),"\n",(0,o.jsx)(n.p,{children:"When you pass a reference to another config instance, the configuration manager will parse and save the references so it can be resolved later.\nWhen the configuration is resolved, the configuration manager will replace the reference with the actual configuration."}),"\n",(0,o.jsxs)(n.p,{children:["For the server to understand a reference it needs to include both the config name and the version of the config. It's also possible to set the version as ",(0,o.jsx)(n.code,{children:"latest"})," to always get the latest version of the referenced config."]}),"\n",(0,o.jsx)(n.p,{children:"When the final configuration is resolved, the referenced config will be merged with the current configuration under the same hierarchy."}),"\n",(0,o.jsx)(n.h2,{id:"reference-structure",children:"Reference structure"}),"\n",(0,o.jsx)(n.p,{children:"In order to use a reference, you need to pass an object with the following structure:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n    "$ref": {\n        "configName": "requested-config",\n        "version": "latest"\n    }\n}\n'})}),"\n",(0,o.jsx)(n.admonition,{type:"tip",children:(0,o.jsxs)(n.p,{children:["In the ",(0,o.jsx)(n.code,{children:"config-ui"})," config editor, you can press ",(0,o.jsx)(n.code,{children:"Ctrl + Space"})," to insert a snippet with the reference structure."]})}),"\n",(0,o.jsx)(n.h2,{id:"example-usage",children:"Example usage"}),"\n",(0,o.jsxs)(n.p,{children:["Let's say we want to create a configuration for a database connection for our app.\nWe know there is already a configuration for the database connection in the ",(0,o.jsx)(n.code,{children:"db-partial"})," config that is only missing the database name."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",metastring:'title="db-partial"',children:'{\n  "ssl": {\n    "enabled": false\n  },\n  "host": "avi"\n}\n'})}),"\n",(0,o.jsxs)(n.p,{children:["We can create a new configuration that references the ",(0,o.jsx)(n.code,{children:"db-partial"})," config and only sets the database name."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",metastring:'title="db-full"',children:'{\n    "$ref": {\n        "configName": "db-partial",\n        "version": "latest"\n    },\n    "database": "my-db"\n}\n'})}),"\n",(0,o.jsx)(n.p,{children:"The resolved configuration will be:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "ssl": {\n    "enabled": false\n  },\n  "host": "avi",\n  "database": "my-db"\n}\n'})})]})}function f(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},6636:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>i});var a=t(8441);const o={},r=a.createContext(o);function s(e){const n=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);