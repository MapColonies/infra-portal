"use strict";(self.webpackChunkinfra_portal=self.webpackChunkinfra_portal||[]).push([[3769],{16332:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>h,frontMatter:()=>c,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"knowledge-base/packages/jobnik-sdk/typedoc/interfaces/IJobnikSDK","title":"IJobnikSDK","description":"@map-colonies/jobnik-sdk","source":"@site/docs/knowledge-base/packages/jobnik-sdk/typedoc/interfaces/IJobnikSDK.md","sourceDirName":"knowledge-base/packages/jobnik-sdk/typedoc/interfaces","slug":"/knowledge-base/packages/jobnik-sdk/typedoc/interfaces/IJobnikSDK","permalink":"/infra-portal/docs/knowledge-base/packages/jobnik-sdk/typedoc/interfaces/IJobnikSDK","draft":false,"unlisted":false,"editUrl":"https://github.com/MapColonies/infra-portal/tree/master/docs/knowledge-base/packages/jobnik-sdk/typedoc/interfaces/IJobnikSDK.md","tags":[],"version":"current","frontMatter":{},"sidebar":"knowledgeBaseSidebar","previous":{"title":"IConsumer","permalink":"/infra-portal/docs/knowledge-base/packages/jobnik-sdk/typedoc/interfaces/IConsumer"},"next":{"title":"IProducer","permalink":"/infra-portal/docs/knowledge-base/packages/jobnik-sdk/typedoc/interfaces/IProducer"}}');var d=s(74848),i=s(28453);const c={},t=void 0,l={},o=[{value:"Example",id:"example",level:2},{value:"Type Parameters",id:"type-parameters",level:2},{value:"Properties",id:"properties",level:2},{value:"createWorker()",id:"createworker",level:3},{value:"Type Parameters",id:"type-parameters-1",level:4},{value:"Parameters",id:"parameters",level:4},{value:"stageType",id:"stagetype",level:5},{value:"taskHandler",id:"taskhandler",level:5},{value:"options",id:"options",level:5},{value:"Returns",id:"returns",level:4},{value:"Example",id:"example-1",level:4},{value:"getApiClient()",id:"getapiclient",level:3},{value:"Returns",id:"returns-1",level:4},{value:"DELETE",id:"delete",level:5},{value:"GET",id:"get",level:5},{value:"HEAD",id:"head",level:5},{value:"OPTIONS",id:"options-1",level:5},{value:"PATCH",id:"patch",level:5},{value:"POST",id:"post",level:5},{value:"PUT",id:"put",level:5},{value:"request",id:"request",level:5},{value:"TRACE",id:"trace",level:5},{value:"eject()",id:"eject",level:5},{value:"Parameters",id:"parameters-1",level:6},{value:"middleware",id:"middleware",level:6},{value:"Returns",id:"returns-2",level:6},{value:"use()",id:"use",level:5},{value:"Parameters",id:"parameters-2",level:6},{value:"middleware",id:"middleware-1",level:6},{value:"Returns",id:"returns-3",level:6},{value:"getConsumer()",id:"getconsumer",level:3},{value:"Returns",id:"returns-4",level:4},{value:"getProducer()",id:"getproducer",level:3},{value:"Returns",id:"returns-5",level:4}];function a(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",hr:"hr",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.p,{children:(0,d.jsx)(n.a,{href:"/infra-portal/docs/knowledge-base/packages/jobnik-sdk/typedoc/",children:(0,d.jsx)(n.strong,{children:"@map-colonies/jobnik-sdk"})})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h1,{id:"interface-ijobniksdkjobtypes-stagetypes",children:"Interface: IJobnikSDK<JobTypes, StageTypes>"}),"\n",(0,d.jsxs)(n.p,{children:["Defined in: ",(0,d.jsx)(n.a,{href:"https://github.com/MapColonies/jobnik-sdk/blob/2209fb85b762423afa05ccdd8b60589b5cf22f3a/src/types/sdk.ts#L40",children:"types/sdk.ts:40"})]}),"\n",(0,d.jsx)(n.p,{children:"Main interface for the Jobnik SDK providing access to job management clients.\nCentral API for creating jobs, consuming tasks, and managing worker processes."}),"\n",(0,d.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-typescript",children:"interface MyJobTypes {\n  'image-processing': {\n    userMetadata: { userId: string };\n    data: { imageUrl: string };\n  };\n}\n\ninterface MyStageTypes {\n  'resize': {\n    userMetadata: { quality: number };\n    data: { width: number; height: number };\n    task: {\n      userMetadata: { batchId: string };\n      data: { sourceUrl: string };\n    };\n  };\n}\n\nconst sdk: IJobnikSDK<MyJobTypes, MyStageTypes> = new JobnikSDK({\n  baseUrl: 'https://api.example.com'\n});\n"})}),"\n",(0,d.jsx)(n.h2,{id:"type-parameters",children:"Type Parameters"}),"\n",(0,d.jsxs)(n.p,{children:["\u2022 ",(0,d.jsx)(n.strong,{children:"JobTypes"})," ",(0,d.jsx)(n.em,{children:"extends"})," ",(0,d.jsx)(n.code,{children:"JobTypesTemplate"}),"<",(0,d.jsx)(n.code,{children:"JobTypes"}),"> = ",(0,d.jsx)(n.code,{children:"Record"}),"<",(0,d.jsx)(n.code,{children:"string"}),", ",(0,d.jsx)(n.a,{href:"/infra-portal/docs/knowledge-base/packages/jobnik-sdk/typedoc/interfaces/JobData",children:(0,d.jsx)(n.code,{children:"JobData"})}),">"]}),"\n",(0,d.jsx)(n.p,{children:"Interface defining job types with their metadata and data schemas"}),"\n",(0,d.jsxs)(n.p,{children:["\u2022 ",(0,d.jsx)(n.strong,{children:"StageTypes"})," ",(0,d.jsx)(n.em,{children:"extends"})," ",(0,d.jsx)(n.code,{children:"StageTypesTemplate"}),"<",(0,d.jsx)(n.code,{children:"StageTypes"}),"> = ",(0,d.jsx)(n.code,{children:"Record"}),"<",(0,d.jsx)(n.code,{children:"string"}),", ",(0,d.jsx)(n.a,{href:"/infra-portal/docs/knowledge-base/packages/jobnik-sdk/typedoc/interfaces/StageData",children:(0,d.jsx)(n.code,{children:"StageData"})}),">"]}),"\n",(0,d.jsx)(n.p,{children:"Interface defining stage types with their metadata, data, and task schemas"}),"\n",(0,d.jsx)(n.h2,{id:"properties",children:"Properties"}),"\n",(0,d.jsx)(n.h3,{id:"createworker",children:"createWorker()"}),"\n",(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"createWorker"}),": <",(0,d.jsx)(n.code,{children:"JobType"}),", ",(0,d.jsx)(n.code,{children:"StageType"}),">(",(0,d.jsx)(n.code,{children:"stageType"}),", ",(0,d.jsx)(n.code,{children:"taskHandler"}),", ",(0,d.jsx)(n.code,{children:"options"}),") => ",(0,d.jsx)(n.a,{href:"/infra-portal/docs/knowledge-base/packages/jobnik-sdk/typedoc/interfaces/IWorker",children:(0,d.jsx)(n.code,{children:"IWorker"})})]}),"\n"]}),"\n",(0,d.jsxs)(n.p,{children:["Defined in: ",(0,d.jsx)(n.a,{href:"https://github.com/MapColonies/jobnik-sdk/blob/2209fb85b762423afa05ccdd8b60589b5cf22f3a/src/types/sdk.ts#L83",children:"types/sdk.ts:83"})]}),"\n",(0,d.jsx)(n.p,{children:"Creates a worker instance to continuously process tasks of a specific stage type."}),"\n",(0,d.jsx)(n.h4,{id:"type-parameters-1",children:"Type Parameters"}),"\n",(0,d.jsxs)(n.p,{children:["\u2022 ",(0,d.jsx)(n.strong,{children:"JobType"})," ",(0,d.jsx)(n.em,{children:"extends"})," ",(0,d.jsx)(n.code,{children:"string"})," | ",(0,d.jsx)(n.code,{children:"string"})," & ",(0,d.jsx)(n.code,{children:"object"})," = ",(0,d.jsx)(n.code,{children:"string"})]}),"\n",(0,d.jsxs)(n.p,{children:["\u2022 ",(0,d.jsx)(n.strong,{children:"StageType"})," ",(0,d.jsx)(n.em,{children:"extends"})," ",(0,d.jsx)(n.code,{children:"string"})," | ",(0,d.jsx)(n.code,{children:"string"})," & ",(0,d.jsx)(n.code,{children:"object"})," = ",(0,d.jsx)(n.code,{children:"string"})]}),"\n",(0,d.jsx)(n.p,{children:"The stage type this worker will process"}),"\n",(0,d.jsx)(n.h4,{id:"parameters",children:"Parameters"}),"\n",(0,d.jsx)(n.h5,{id:"stagetype",children:"stageType"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"StageType"})}),"\n",(0,d.jsx)(n.p,{children:"Stage type name to process tasks for"}),"\n",(0,d.jsx)(n.h5,{id:"taskhandler",children:"taskHandler"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.a,{href:"/infra-portal/docs/knowledge-base/packages/jobnik-sdk/typedoc/type-aliases/TaskHandler",children:(0,d.jsx)(n.code,{children:"TaskHandler"})}),"<",(0,d.jsx)(n.code,{children:"JobTypes"}),", ",(0,d.jsx)(n.code,{children:"StageTypes"}),", ",(0,d.jsx)(n.code,{children:"JobType"}),", ",(0,d.jsx)(n.code,{children:"StageType"}),">"]}),"\n",(0,d.jsx)(n.p,{children:"Function to handle individual task processing"}),"\n",(0,d.jsx)(n.h5,{id:"options",children:"options"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.a,{href:"/infra-portal/docs/knowledge-base/packages/jobnik-sdk/typedoc/interfaces/WorkerOptions",children:(0,d.jsx)(n.code,{children:"WorkerOptions"})})}),"\n",(0,d.jsx)(n.p,{children:"Optional worker configuration (concurrency, intervals, circuit breakers)"}),"\n",(0,d.jsx)(n.h4,{id:"returns",children:"Returns"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.a,{href:"/infra-portal/docs/knowledge-base/packages/jobnik-sdk/typedoc/interfaces/IWorker",children:(0,d.jsx)(n.code,{children:"IWorker"})})}),"\n",(0,d.jsx)(n.p,{children:"Worker instance for continuous task processing"}),"\n",(0,d.jsx)(n.h4,{id:"example-1",children:"Example"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-typescript",children:"const worker = sdk.createWorker(\n  async (task, context) => {\n    context.logger.info('Processing task', { taskId: task.id });\n    // Process task data...\n  },\n  'resize',\n  { concurrency: 3, pullingInterval: 5000 }\n);\n"})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"getapiclient",children:"getApiClient()"}),"\n",(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"getApiClient"}),": () => ",(0,d.jsx)(n.code,{children:"object"})]}),"\n"]}),"\n",(0,d.jsxs)(n.p,{children:["Defined in: ",(0,d.jsx)(n.a,{href:"https://github.com/MapColonies/jobnik-sdk/blob/2209fb85b762423afa05ccdd8b60589b5cf22f3a/src/types/sdk.ts#L48",children:"types/sdk.ts:48"})]}),"\n",(0,d.jsx)(n.p,{children:"Gets the underlying API client for direct API interactions."}),"\n",(0,d.jsx)(n.h4,{id:"returns-1",children:"Returns"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"object"})}),"\n",(0,d.jsx)(n.p,{children:"ApiClient instance for low-level API calls"}),"\n",(0,d.jsx)(n.h5,{id:"delete",children:"DELETE"}),"\n",(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"DELETE"}),": ",(0,d.jsx)(n.code,{children:"ClientMethod"}),"<",(0,d.jsx)(n.code,{children:"paths"}),", ",(0,d.jsx)(n.code,{children:'"delete"'}),", ",(0,d.jsx)(n.code,{children:"`${string}/${string}`"}),">"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:"Call a DELETE endpoint"}),"\n",(0,d.jsx)(n.h5,{id:"get",children:"GET"}),"\n",(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"GET"}),": ",(0,d.jsx)(n.code,{children:"ClientMethod"}),"<",(0,d.jsx)(n.code,{children:"paths"}),", ",(0,d.jsx)(n.code,{children:'"get"'}),", ",(0,d.jsx)(n.code,{children:"`${string}/${string}`"}),">"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:"Call a GET endpoint"}),"\n",(0,d.jsx)(n.h5,{id:"head",children:"HEAD"}),"\n",(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"HEAD"}),": ",(0,d.jsx)(n.code,{children:"ClientMethod"}),"<",(0,d.jsx)(n.code,{children:"paths"}),", ",(0,d.jsx)(n.code,{children:'"head"'}),", ",(0,d.jsx)(n.code,{children:"`${string}/${string}`"}),">"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:"Call a HEAD endpoint"}),"\n",(0,d.jsx)(n.h5,{id:"options-1",children:"OPTIONS"}),"\n",(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"OPTIONS"}),": ",(0,d.jsx)(n.code,{children:"ClientMethod"}),"<",(0,d.jsx)(n.code,{children:"paths"}),", ",(0,d.jsx)(n.code,{children:'"options"'}),", ",(0,d.jsx)(n.code,{children:"`${string}/${string}`"}),">"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:"Call a OPTIONS endpoint"}),"\n",(0,d.jsx)(n.h5,{id:"patch",children:"PATCH"}),"\n",(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"PATCH"}),": ",(0,d.jsx)(n.code,{children:"ClientMethod"}),"<",(0,d.jsx)(n.code,{children:"paths"}),", ",(0,d.jsx)(n.code,{children:'"patch"'}),", ",(0,d.jsx)(n.code,{children:"`${string}/${string}`"}),">"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:"Call a PATCH endpoint"}),"\n",(0,d.jsx)(n.h5,{id:"post",children:"POST"}),"\n",(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"POST"}),": ",(0,d.jsx)(n.code,{children:"ClientMethod"}),"<",(0,d.jsx)(n.code,{children:"paths"}),", ",(0,d.jsx)(n.code,{children:'"post"'}),", ",(0,d.jsx)(n.code,{children:"`${string}/${string}`"}),">"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:"Call a POST endpoint"}),"\n",(0,d.jsx)(n.h5,{id:"put",children:"PUT"}),"\n",(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"PUT"}),": ",(0,d.jsx)(n.code,{children:"ClientMethod"}),"<",(0,d.jsx)(n.code,{children:"paths"}),", ",(0,d.jsx)(n.code,{children:'"put"'}),", ",(0,d.jsx)(n.code,{children:"`${string}/${string}`"}),">"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:"Call a PUT endpoint"}),"\n",(0,d.jsx)(n.h5,{id:"request",children:"request"}),"\n",(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"request"}),": ",(0,d.jsx)(n.code,{children:"ClientRequestMethod"}),"<",(0,d.jsx)(n.code,{children:"paths"}),", ",(0,d.jsx)(n.code,{children:"`${string}/${string}`"}),">"]}),"\n"]}),"\n",(0,d.jsx)(n.h5,{id:"trace",children:"TRACE"}),"\n",(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"TRACE"}),": ",(0,d.jsx)(n.code,{children:"ClientMethod"}),"<",(0,d.jsx)(n.code,{children:"paths"}),", ",(0,d.jsx)(n.code,{children:'"trace"'}),", ",(0,d.jsx)(n.code,{children:"`${string}/${string}`"}),">"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:"Call a TRACE endpoint"}),"\n",(0,d.jsx)(n.h5,{id:"eject",children:"eject()"}),"\n",(0,d.jsx)(n.p,{children:"Unregister middleware"}),"\n",(0,d.jsx)(n.h6,{id:"parameters-1",children:"Parameters"}),"\n",(0,d.jsx)(n.h6,{id:"middleware",children:"middleware"}),"\n",(0,d.jsxs)(n.p,{children:["...",(0,d.jsx)(n.code,{children:"Middleware"}),"[]"]}),"\n",(0,d.jsx)(n.h6,{id:"returns-2",children:"Returns"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"void"})}),"\n",(0,d.jsx)(n.h5,{id:"use",children:"use()"}),"\n",(0,d.jsx)(n.p,{children:"Register middleware"}),"\n",(0,d.jsx)(n.h6,{id:"parameters-2",children:"Parameters"}),"\n",(0,d.jsx)(n.h6,{id:"middleware-1",children:"middleware"}),"\n",(0,d.jsxs)(n.p,{children:["...",(0,d.jsx)(n.code,{children:"Middleware"}),"[]"]}),"\n",(0,d.jsx)(n.h6,{id:"returns-3",children:"Returns"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"void"})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"getconsumer",children:"getConsumer()"}),"\n",(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"getConsumer"}),": () => ",(0,d.jsx)(n.a,{href:"/infra-portal/docs/knowledge-base/packages/jobnik-sdk/typedoc/interfaces/IConsumer",children:(0,d.jsx)(n.code,{children:"IConsumer"})}),"<",(0,d.jsx)(n.code,{children:"StageTypes"}),">"]}),"\n"]}),"\n",(0,d.jsxs)(n.p,{children:["Defined in: ",(0,d.jsx)(n.a,{href:"https://github.com/MapColonies/jobnik-sdk/blob/2209fb85b762423afa05ccdd8b60589b5cf22f3a/src/types/sdk.ts#L54",children:"types/sdk.ts:54"})]}),"\n",(0,d.jsx)(n.p,{children:"Gets a consumer client for dequeueing and processing tasks."}),"\n",(0,d.jsx)(n.h4,{id:"returns-4",children:"Returns"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.a,{href:"/infra-portal/docs/knowledge-base/packages/jobnik-sdk/typedoc/interfaces/IConsumer",children:(0,d.jsx)(n.code,{children:"IConsumer"})}),"<",(0,d.jsx)(n.code,{children:"StageTypes"}),">"]}),"\n",(0,d.jsx)(n.p,{children:"Consumer instance for task consumption operations"}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"getproducer",children:"getProducer()"}),"\n",(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"getProducer"}),": () => ",(0,d.jsx)(n.a,{href:"/infra-portal/docs/knowledge-base/packages/jobnik-sdk/typedoc/interfaces/IProducer",children:(0,d.jsx)(n.code,{children:"IProducer"})}),"<",(0,d.jsx)(n.code,{children:"JobTypes"}),", ",(0,d.jsx)(n.code,{children:"StageTypes"}),">"]}),"\n"]}),"\n",(0,d.jsxs)(n.p,{children:["Defined in: ",(0,d.jsx)(n.a,{href:"https://github.com/MapColonies/jobnik-sdk/blob/2209fb85b762423afa05ccdd8b60589b5cf22f3a/src/types/sdk.ts#L60",children:"types/sdk.ts:60"})]}),"\n",(0,d.jsx)(n.p,{children:"Gets a producer client for creating jobs, stages, and tasks."}),"\n",(0,d.jsx)(n.h4,{id:"returns-5",children:"Returns"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.a,{href:"/infra-portal/docs/knowledge-base/packages/jobnik-sdk/typedoc/interfaces/IProducer",children:(0,d.jsx)(n.code,{children:"IProducer"})}),"<",(0,d.jsx)(n.code,{children:"JobTypes"}),", ",(0,d.jsx)(n.code,{children:"StageTypes"}),">"]}),"\n",(0,d.jsx)(n.p,{children:"Producer instance for job creation operations"})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(a,{...e})}):a(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>t});var r=s(96540);const d={},i=r.createContext(d);function c(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:c(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);